(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1007:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1154:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},1788:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},2525:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},3717:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},3786:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},4541:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]])},4783:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]])},4838:(e,t,a)=>{"use strict";a.d(t,{SQ:()=>h,_2:()=>u,lp:()=>p,mB:()=>x,rI:()=>c,ty:()=>m});var s=a(5155),r=a(2115),l=a(9449),d=a(3052),n=a(5196),i=a(9428),o=a(9434);let c=l.bL,m=l.l9;l.YJ,l.ZL,l.Pb,l.z6,r.forwardRef((e,t)=>{let{className:a,inset:r,children:n,...i}=e;return(0,s.jsxs)(l.ZP,{ref:t,className:(0,o.cn)("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...i,children:[n,(0,s.jsx)(d.A,{className:"ml-auto"})]})}).displayName=l.ZP.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.G5,{ref:t,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",a),...r})}).displayName=l.G5.displayName;let h=r.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...d}=e;return(0,s.jsx)(l.ZL,{children:(0,s.jsx)(l.UC,{ref:t,sideOffset:r,className:(0,o.cn)("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",a),...d})})});h.displayName=l.UC.displayName;let u=r.forwardRef((e,t)=>{let{className:a,inset:r,...d}=e;return(0,s.jsx)(l.q7,{ref:t,className:(0,o.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...d})});u.displayName=l.q7.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,checked:d,...i}=e;return(0,s.jsxs)(l.H_,{ref:t,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:d,...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.VF,{children:(0,s.jsx)(n.A,{className:"h-4 w-4"})})}),r]})}).displayName=l.H_.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,...d}=e;return(0,s.jsxs)(l.hN,{ref:t,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...d,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.VF,{children:(0,s.jsx)(i.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=l.hN.displayName;let p=r.forwardRef((e,t)=>{let{className:a,inset:r,...d}=e;return(0,s.jsx)(l.JU,{ref:t,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a),...d})});p.displayName=l.JU.displayName;let x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.wv,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",a),...r})});x.displayName=l.wv.displayName},5695:(e,t,a)=>{"use strict";var s=a(8999);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},6088:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>M});var s=a(5155),r=a(6874),l=a.n(r),d=a(2115),n=a(5695),i=a(6671),o=a(7297),c=a(285),m=a(6695),h=a(4838),u=a(4541),p=a(4783),x=a(1154),f=a(9869),y=a(7434);let g=(0,a(9946).A)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);var j=a(3786),v=a(3717),b=a(1788),w=a(2525),N=a(1007),k=a(9074),A=a(1459);function M(){let{data:e,isPending:t}=(0,o.wV)(),a=(0,n.useRouter)(),r=(0,d.useRef)(null),[M,R]=(0,d.useState)([]),[_,z]=(0,d.useState)(!0),[C,E]=(0,d.useState)(!1);(0,d.useEffect)(()=>{S()},[]);let S=async()=>{z(!0);try{let e=await fetch("/api/docuseal/templates");if(!e.ok){let t=await e.text();throw Error(t||"Failed to fetch templates")}let t=await e.json(),a=[];a=Array.isArray(t)?t:Array.isArray(null==t?void 0:t.data)?t.data:Array.isArray(null==t?void 0:t.templates)?t.templates:Array.isArray(null==t?void 0:t.items)?t.items:[],R(a)}catch(t){let e=t instanceof Error?t.message:String(t);i.oR.error("Unable to load templates: "+e)}finally{z(!1)}},U=async e=>{if(confirm("Are you sure you want to delete this template?")){R(t=>t.filter(t=>String(t.id)!==String(e)));try{let t=await fetch("/api/docuseal/templates/".concat(e),{method:"DELETE"});if(!t.ok){let e=await t.text();throw Error(e||"Delete failed")}i.oR.success("Template deleted")}catch(t){let e=t instanceof Error?t.message:String(t);i.oR.error("Delete failed: "+e),R(M)}}},D=async e=>{let t=Array.isArray(e.documents)&&e.documents.length>0?e.documents[0]:null;if(!t||!t.url){i.oR.error("No downloadable document found for this template.");return}try{let a=await fetch(t.url);if(!a.ok)throw Error("Failed to fetch the document for download.");let s=await a.blob(),r=document.createElement("a");r.href=window.URL.createObjectURL(s),r.download=t.filename||e.name||"document.pdf",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(r.href),i.oR.success("Download started.")}catch(t){let e=t instanceof Error?t.message:String(t);i.oR.error("Download failed: ".concat(e))}},H=async e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!s)return;E(!0);let l=i.oR.loading("Uploading document and creating template...");try{let e=new FormData;e.append("file",s);let t=await fetch("/api/docuseal/templates/upload",{method:"POST",body:e});if(!t.ok){let e=await t.json();throw Error(e.message||"Upload failed")}let r=await t.json();i.oR.success("Template created successfully! Redirecting to editor...",{id:l}),a.push("/templates/".concat(r.id,"/edit"))}catch(t){let e=t instanceof Error?t.message:String(t);i.oR.error("Upload failed: ".concat(e),{id:l})}finally{E(!1),r.current&&(r.current.value="")}};return t?(0,s.jsx)(A.O2,{}):e?(0,s.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,s.jsx)("div",{className:"sticky top-16 z-40 w-full bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b border-border/40",children:(0,s.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 rounded-lg px-3 py-2 bg-black text-white dark:bg-white dark:text-black",children:[(0,s.jsx)(u.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"text-xs font-medium",children:M.length})]}),(0,s.jsx)(l(),{href:"/submissions",children:(0,s.jsx)("div",{className:"flex items-center space-x-2 rounded-lg px-3 py-2 bg-white border border-gray-200 text-gray-600 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-300 dark:hover:bg-gray-700 cursor-pointer transition-colors",children:(0,s.jsx)(p.A,{className:"h-4 w-4"})})})]}),(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Document Templates"})]}),(0,s.jsx)("input",{type:"file",ref:r,onChange:H,className:"hidden",accept:".pdf,.doc,.docx,.xls,.xlsx,.png,.jpg,.jpeg,.bmp"}),(0,s.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>{var e;return null===(e=r.current)||void 0===e?void 0:e.click()},disabled:C,children:[C?(0,s.jsx)(x.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(f.A,{className:"mr-2 h-4 w-4"}),C?"UPLOADING...":"UPLOAD"]})]})})}),(0,s.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,s.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 mb-8",children:(_?[]:M).map(e=>{var t,a,r;return(0,s.jsx)(m.Zp,{className:"group cursor-pointer transition-all hover:shadow-md",children:(0,s.jsxs)(m.Wu,{className:"p-6",children:[(0,s.jsxs)("div",{className:"mb-4 flex items-start justify-between",children:[(0,s.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-muted",children:(0,s.jsx)(y.A,{className:"h-6 w-6 text-muted-foreground"})}),(0,s.jsxs)(h.rI,{children:[(0,s.jsx)(h.ty,{asChild:!0,children:(0,s.jsx)(c.$,{variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100",children:(0,s.jsx)(g,{className:"h-4 w-4"})})}),(0,s.jsxs)(h.SQ,{align:"end",className:"w-48",children:[(0,s.jsx)(h._2,{asChild:!0,children:(0,s.jsxs)(l(),{href:"/templates/".concat(e.id),className:"flex items-center",children:[(0,s.jsx)(j.A,{className:"mr-2 h-4 w-4"}),"Open"]})}),(0,s.jsx)(h._2,{asChild:!0,children:(0,s.jsxs)(l(),{href:"/templates/".concat(e.id,"/edit"),className:"flex items-center",children:[(0,s.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Edit"]})}),(0,s.jsxs)(h._2,{onSelect:()=>D(e),className:"flex items-center",children:[(0,s.jsx)(b.A,{className:"mr-2 h-4 w-4"}),"Download"]}),(0,s.jsxs)(h._2,{onSelect:()=>U(e.id),className:"flex items-center text-red-600 focus:text-red-600",children:[(0,s.jsx)(w.A,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]}),(0,s.jsx)("h3",{className:"mb-2 font-semibold text-foreground line-clamp-2",children:(0,s.jsx)(l(),{href:"/templates/".concat(e.id),className:"block",children:e.name})}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[(0,s.jsx)(N.A,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:"string"==typeof e.author?e.author:e.author&&"object"==typeof e.author?e.author.first_name||e.author.name?"".concat(null!==(t=e.author.first_name)&&void 0!==t?t:""," ").concat(null!==(a=e.author.last_name)&&void 0!==a?a:"").trim()||e.author.name:null!==(r=e.author.email)&&void 0!==r?r:JSON.stringify(e.author):"Unknown"})]}),(0,s.jsxs)("div",{className:"mt-2 flex items-center space-x-2 text-sm text-muted-foreground",children:[(0,s.jsx)(k.A,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:e.date})]})]})},e.id)})}),(0,s.jsx)("div",{className:"mb-8 flex justify-center",children:(0,s.jsx)(m.Zp,{className:"w-full max-w-md border-2 border-dashed border-muted-foreground/25 bg-muted/20",children:(0,s.jsxs)(m.Wu,{className:"flex flex-col items-center justify-center p-8 text-center",children:[(0,s.jsx)("h3",{className:"mb-2 font-semibold",children:"Upload a New Document"}),(0,s.jsx)("p",{className:"mb-4 text-sm text-muted-foreground",children:"Click to upload or drag and drop"}),(0,s.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>{var e;return null===(e=r.current)||void 0===e?void 0:e.click()},disabled:C,children:[C?(0,s.jsx)(x.A,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Choose File"]})]})})})]})]}):(0,s.jsx)("div",{className:"flex min-h-screen flex-col items-center justify-center px-4",children:(0,s.jsxs)("div",{className:"mx-auto max-w-md text-center",children:[(0,s.jsx)("div",{className:"mb-8 flex justify-center",children:(0,s.jsx)("span",{className:"text-6xl",children:"\uD83D\uDC35"})}),(0,s.jsx)("h1",{className:"mb-4 text-3xl font-bold tracking-tight",children:"Welcome to DocuSeal App"}),(0,s.jsx)("p",{className:"mb-8 text-muted-foreground",children:"Create, manage, and track your document templates and submissions with ease."}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(l(),{href:"/auth/signin",children:(0,s.jsx)(c.$,{size:"lg",className:"w-full",children:"Sign In"})}),(0,s.jsx)(l(),{href:"/auth/signup",children:(0,s.jsx)(c.$,{variant:"outline",size:"lg",className:"w-full",children:"Create Account"})})]})]})})}},6576:(e,t,a)=>{Promise.resolve().then(a.bind(a,6088))},7297:(e,t,a)=>{"use strict";a.d(t,{CI:()=>l,Hh:()=>r,Jv:()=>s,wV:()=>d});let{signIn:s,signUp:r,signOut:l,useSession:d}=(0,a(4852).MB)({baseURL:"http://localhost:3000"})},7434:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},9074:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},9869:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[455,671,874,890,852,781,173,211,441,684,358],()=>t(6576)),_N_E=e.O()}]);