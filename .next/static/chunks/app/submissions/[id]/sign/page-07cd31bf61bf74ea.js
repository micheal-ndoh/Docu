(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[770],{285:(e,s,t)=>{"use strict";t.d(s,{$:()=>c,r:()=>o});var n=t(5155),i=t(2115),r=t(9708),a=t(2085),l=t(9434);let o=(0,a.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,s)=>{let{className:t,variant:i,size:a,asChild:c=!1,...d}=e,u=c?r.DX:"button";return(0,n.jsx)(u,{className:(0,l.cn)(o({variant:i,size:a,className:t})),ref:s,...d})});c.displayName="Button"},1154:(e,s,t)=>{"use strict";t.d(s,{A:()=>n});let n=(0,t(9946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2362:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var n=t(5155),i=t(2115),r=t(5695),a=t(6671),l=t(1154),o=t(9946);let c=(0,o.A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),d=(0,o.A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var u=t(4357),m=t(285),h=t(6695);function x(){let e=(0,r.useParams)(),s=(0,r.useRouter)(),t=e.id,[o,x]=(0,i.useState)(!0),[f,g]=(0,i.useState)(null),[p,b]=(0,i.useState)(null),[v,j]=(0,i.useState)(null);(0,i.useEffect)(()=>{t&&y(t)},[t]);let y=async e=>{x(!0),b(null);try{var s,t;console.log("[sign page] Fetching submission:",e);let n=await fetch("/api/docuseal/submissions/".concat(e));if(!n.ok)throw Error("Failed to fetch submission details");let i=await n.json();if(console.log("[sign page] Submission data:",i),console.log("[sign page] Submitters:",i.submitters),console.log("[sign page] First submitter embed_src:",null===(t=i.submitters)||void 0===t?void 0:null===(s=t[0])||void 0===s?void 0:s.embed_src),j(i),"completed"===i.status){b(null),g(null),a.oR.success("Document already signed!",{description:"This submission has been completed."});return}if(i.submitters&&i.submitters[0]){let e=i.submitters[0],s=e.embed_src||"https://docuseal.com/s/".concat(e.slug);console.log("[sign page] Setting signing link:",s),g(s)}else console.error("[sign page] No submitters found. Full data:",JSON.stringify(i,null,2)),b("Signing link not found for this submission."),a.oR.error("Signing link missing",{description:"The signing link for this submission could not be found."})}catch(e){b(e.message||"An error occurred while fetching the signing link."),a.oR.error("Error fetching signing link",{description:e.message||"Please try again."})}finally{x(!1)}};if(o)return(0,n.jsx)("div",{className:"flex justify-center items-center min-h-[calc(100vh-100px)]",children:(0,n.jsx)(l.A,{className:"h-8 w-8 animate-spin"})});if((null==v?void 0:v.status)==="completed"){var N,k;return(0,n.jsxs)("div",{className:"container mx-auto py-8",children:[(0,n.jsxs)(m.$,{variant:"ghost",onClick:()=>s.push("/submissions"),className:"mb-4",children:[(0,n.jsx)(c,{className:"mr-2 h-4 w-4"}),"Back to Submissions"]}),(0,n.jsx)(h.Zp,{className:"max-w-2xl mx-auto",children:(0,n.jsx)(h.Wu,{className:"pt-6",children:(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,n.jsx)(d,{className:"h-16 w-16 text-green-500 mb-4"}),(0,n.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Document Signed!"}),(0,n.jsx)("p",{className:"text-muted-foreground mb-6",children:"This submission has been completed successfully."}),(null===(k=v.documents)||void 0===k?void 0:null===(N=k[0])||void 0===N?void 0:N.url)&&(0,n.jsx)(m.$,{onClick:()=>window.open(v.documents[0].url,"_blank"),children:"Download Signed Document"})]})})})]})}return p?(0,n.jsxs)("div",{className:"container mx-auto py-8",children:[(0,n.jsxs)(m.$,{variant:"ghost",onClick:()=>s.push("/submissions"),className:"mb-4",children:[(0,n.jsx)(c,{className:"mr-2 h-4 w-4"}),"Back to Submissions"]}),(0,n.jsx)(h.Zp,{className:"max-w-2xl mx-auto",children:(0,n.jsx)(h.Wu,{className:"pt-6",children:(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,n.jsxs)("p",{className:"text-red-500 mb-4",children:["Error: ",p]}),(0,n.jsx)(m.$,{onClick:()=>s.push("/submissions"),children:"Go Back"})]})})})]}):f?(0,n.jsxs)("div",{className:"container mx-auto py-8",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,n.jsxs)(m.$,{variant:"ghost",onClick:()=>s.push("/submissions"),children:[(0,n.jsx)(c,{className:"mr-2 h-4 w-4"}),"Back to Submissions"]}),(0,n.jsxs)(m.$,{variant:"outline",onClick:()=>{f&&(navigator.clipboard.writeText(f),a.oR.success("Signing link copied to clipboard!",{description:"Share this link with the person who needs to sign."}))},children:[(0,n.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"Copy Link to Share"]})]}),(0,n.jsx)(h.Zp,{children:(0,n.jsx)(h.Wu,{className:"p-6",children:(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center space-y-6",children:[(0,n.jsx)("div",{className:"text-4xl",children:"\uD83D\uDCDD"}),(0,n.jsx)("h2",{className:"text-2xl font-bold",children:"Ready to Sign"}),(0,n.jsx)("p",{className:"text-muted-foreground max-w-md",children:"Click the button below to open the signing form. You'll be able to review and sign the document."}),(0,n.jsx)(m.$,{size:"lg",onClick:()=>window.open(f,"_blank"),className:"mt-4",children:"Open Signing Form"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"The form will open in a new tab"})]})})}),(0,n.jsx)("div",{className:"mt-4 text-center text-sm text-muted-foreground",children:(0,n.jsx)("p",{children:"Or copy the link above to share with someone else."})})]}):(0,n.jsxs)("div",{className:"container mx-auto py-8",children:[(0,n.jsxs)(m.$,{variant:"ghost",onClick:()=>s.push("/submissions"),className:"mb-4",children:[(0,n.jsx)(c,{className:"mr-2 h-4 w-4"}),"Back to Submissions"]}),(0,n.jsx)(h.Zp,{className:"max-w-2xl mx-auto",children:(0,n.jsx)(h.Wu,{className:"pt-6",children:(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,n.jsx)("p",{className:"text-muted-foreground mb-4",children:"No signing form available."}),(0,n.jsx)(m.$,{onClick:()=>s.push("/submissions"),children:"Go Back"})]})})})]})}},4357:(e,s,t)=>{"use strict";t.d(s,{A:()=>n});let n=(0,t(9946).A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},5448:(e,s,t)=>{Promise.resolve().then(t.bind(t,2362))},5695:(e,s,t)=>{"use strict";var n=t(8999);t.o(n,"useParams")&&t.d(s,{useParams:function(){return n.useParams}}),t.o(n,"useRouter")&&t.d(s,{useRouter:function(){return n.useRouter}})},6695:(e,s,t)=>{"use strict";t.d(s,{Wu:()=>l,Zp:()=>a});var n=t(5155),i=t(2115),r=t(9434);let a=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,n.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...i})});a.displayName="Card",i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,n.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",t),...i})}).displayName="CardHeader",i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,n.jsx)("div",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",t),...i})}).displayName="CardTitle",i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,n.jsx)("div",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",t),...i})}).displayName="CardDescription";let l=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,n.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",t),...i})});l.displayName="CardContent",i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,n.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",t),...i})}).displayName="CardFooter"},9434:(e,s,t)=>{"use strict";t.d(s,{cn:()=>r});var n=t(2596),i=t(9688);function r(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,i.QP)((0,n.$)(s))}}},e=>{var s=s=>e(e.s=s);e.O(0,[455,671,441,684,358],()=>s(5448)),_N_E=e.O()}]);